<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Random Plant Planting Pot 2d</title>
</head>
<body>
<canvas id='screen' width="1024" height="800" style="positino:absolute;left:0;top:0;"> upgrade browser plz.. </canvas>
<script language="JavaScript" src="plant.js"> </script>
<script>
var example_l_system = new LSystem({
    axiom: "S",
    constants: "",
    rules: 
    [
        "S=X",
        "X=B-[[X]+X]+B-L[-BL-Q+Q++Q]+[+BX-Q+Q++Q]-@-Q+Q++Q",
        "Q=W",
        "W=E",
        "E=R",
        "R=F",
        "T=F",
        "B=@B"
    ],
    iterations: 1,
});

var example_plant = new Plant(
    example_l_system, 
    {seed: {energy: 100000, mineral: 100000, water: 100000,},
     flower: {energy: 1, mineral: 1}, 
     leaf: {energy: 1, mineral: 1}, 
     branch: {energy: 1}},
    30
);

example_plant.feed({water:300});

var ctx = document.getElementById("screen").getContext("2d");
var flower_pot_image = new Image();
flower_pot_image.src = "flower_pot.png";
var lastLoop = new Date();
var framelate = 0;
flower_pot_image.onload = function () {
    setInterval(function () {
        var thisLoop = new Date;
        framelate = 0.8*framelate + 0.2*(thisLoop - lastLoop);
        lastLoop = thisLoop;
        example_plant.grow(0.1);
        ctx.clearRect(0, 0, 1000, 1000);
        ctx.drawImage(flower_pot_image, 200, 572, 200, 200);
        example_plant.draw(ctx, 0, 0, 600, 600);
        //ctx.fillText("framerate: "+framelate+"ms", 0, 20);
        ctx.fillText("plant age: "+ (example_plant.age*0.1).toFixed(1) + " days", 0, 20);
    }, 200);
};
</script>
</body>
</html>
